<!doctype html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="angular.min.js" ></script>
</head>
<body>
<div ng-app="usersApp" ng-controller="usersController">
    <div id="popupsContainer">
        <div ng-include="'includes/AddForm.html'"></div>
    </div>

    <div class="users-container">
        <div class="users-block">
            <div class="users-title">
                <h2>List of users</h2>
                <button class="users-add-new" onclick="show('AddForm')">Add new +</button>
            </div>
            <div class="users-filters">
                <div class="filters-search"><input placeholder="Search User" ng-model="search.fullname"></div>
                <div class="filters-post">
                    <div><input type="checkbox" value="administrator" name="radio" id="filterpost1" ng-model="search.administrator"><label for="filterpost1"> Administrator</label></div><br>
                    <div><input type="checkbox" value="frontend" name="radio" id="filterpost2" ng-model="search.frontenddeveloper"><label for="filterpost2"> Frontend</label></div><br>
                    <div><input type="checkbox" value="backend" name="radio" id="filterpost3" ng-model="search.backenddeveloper"><label for="filterpost3"> Backend</label></div><br>
                    <div><input type="checkbox" value="moderator" name="radio" id="filterpost4" ng-model="search.pomoderatorsts"><label for="filterpost4"> Moderator</label></div><br>
                    <div><input type="checkbox" value="redactor" name="radio" id="filterpost5" ng-model="search.redactor"><label for="filterpost5"> Redactor</label></div><br>
                    <div><input type="checkbox" value="visitor" name="radio" id="filterpost6" ng-model="search.visitor"><label for="filterpost6"> Visitor</label></div><br>
                </div>
                <div class="filters-order">
                    <div class="filters-order-active" onclick="showHideOrders()">By Date</div>
                    <div class="filters-order-popup" id="orderPopup">
                        <div onclick="filterByRating()">By Rating</div>
                        <div onclick="filterByDate()">By Date</div>
                    </div>
                </div>

                <div class="filters-pages">
                    <a href="#">First</a>
                    <a href="#" class="pages-active">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                    <a href="#">4</a>
                    <a href="#">5</a>
                    <a href="#">6</a>
                    <a href="#">7</a>
                    <a href="#">8</a>
                    <a href="#">9</a>
                    <a href="#">Last</a>
                </div>
            </div>
            <div class="users-list">
                <div class="list-user-names">
                    <div>Full Name</div>
                    <div>User Login</div>
                    <div>User Posts</div>
                    <div ng-show="showDate" ng-hide="showRating" class="list-user-date">Register Date</div>
                    <div ng-show="showRating" ng-hide="showDate" class="list-user-rating">Rating</div>
                    <div></div>
                </div>
                <div class="list-user-block" ng-repeat="user in users.info | filter: search">
                    <div>{{user.fullname}}</div>
                    <div>{{user.username}}</div>
                    <div class="list-user-post">{{user.administrator + user.frontenddeveloper + user.backenddeveloper + user.moderator + user.redactor + user.visitor}}</div>
                    <div ng-show="showDate" ng-hide="showRating" class="list-user-date">{{user.regDate}}</div>
                    <div ng-show="showRating" ng-hide="showDate" class="list-user-rating">{{user.rating}}</div>
                    <div class="list-user-buttons"><button onclick="showEditForm(this)">Go to profile</button>
                        <form method="POST" action="/user"> 
							<input type="hidden" name="_method" value="DELETE" placeholder="method" required>
							<input type="hidden" name="id" value="{{user._id}}" placeholder="id" required>
                            <button onclick="deleteUser(this)" type="submit">Delete user <span>✖</span></button>
                        </form>
                    </div>
                    <div class="user-profile-container">
                    <div class="user-profile">
                        <div class="close-editform" onclick="hideEditForm(this)">+</div>
                        <form class="user-edit" name="EditForm" method="POST" action="/user">
                            <input type="hidden" name="_method" value="PUT" placeholder="id" required>
                            <input type="hidden" name="id" value="{{user._id}}" placeholder="id" required>
                            <div><span>Username</span><input type="text" name="username" value="{{user.username}}" placeholder="Enter username" required> </div>
                            <div><span>E-mail</span><input type="text" name="email" value="{{user.email}}" placeholder="Enter email" required> </div>
                            <div><span>Post</span><ul class="user-edit-post">
                                <li><label for="edit_administrator">Administrator</label><input id="edit_administrator" name="administrator" type="checkbox" value="{{user.administrator}}"></li>
                                <li><label for="edit_frontend">Frontend Developer</label><input id="edit_frontend" name="efrontend" type="checkbox" value="{{user.frontenddeveloper}}"></li>
                                <li><label for="edit_backend">Backend Developer</label><input id="edit_backend" name="backend"  type="checkbox" value="{{user.backenddeveloper}}"></li>
                                <li><label for="edit_moderator">Moderator</label><input id="edit_moderator" name="moderator" type="checkbox" value="{{user.moderator}}"></li>
                                <li><label for="edit_redactor">Redactor</label><input id="edit_redactor" name="redactor" type="checkbox" value="{{user.redactor}}"></li>
                                <li><label for="edit_visitor">Visitor</label><input id="edit_visitor" name="visitor" type="checkbox" value="{{user.visitor}}"></li>
                            </ul> </div>
                            <div><span>Phone</span><input name="phone" type="tel" value="{{user.phone}}" placeholder="Enter phone number" required> </div>
                            <div><span>Password</span><input type="password" name="password" value="{{user.password}}" placeholder="Enter password" required> </div>
                            <div><span>Full name</span><input type="text" name="fullname" value="{{user.fullname}}" placeholder="Full name of user" required> </div>
                            <div class="user-edit-btn">
                                <button type="submit" ng-disabled="EditForm.$dirty">Edit user <span>✓</span></button>
                            </div>
                        </form>
                    </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!--
<div class="template-search" ng-app="templateApp" ng-controller="templateController">
    <div ng-include="'templates/template-pack1.html'"></div>
    <span>Enter template name:</span> <input placeholder="Template Name" type = "text" ng-model = "templateName">
    <br>
    <br>
    <ul>
        <li ng-repeat="element in template.elements | filter: templateName">
            {{element.name}}
            <button ng-click="addElement(element.id)" class="addBtn ">Add  </button>
        </li>
    </ul>
</div>

<div class="template-display" id="addedTemplates">
</div>
<button class="clear-btn" onclick="cleanTemplates()">C<br>L<br>E<br>A<br>N</button> !-->
<script src="test.js"></script>
<script src="js/users.js"></script>
</body>
</html>