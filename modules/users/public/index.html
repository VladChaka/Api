<!doctype html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="angular.min.js" ></script>
</head>
<body>
<div ng-app="usersApp" ng-controller="usersController">

    <div id="popupsContainer">
        <div ng-include="'includes/AddForm.html'"></div>
    </div>

    <div class="users-container">
        <div class="users-block">
            <div class="users-title">
                <h2>List of users</h2>
            </div>
            <div class="users-filters">
                <div class="filters-pages">
                    <div>
                        <button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">
                            Previous
                        </button>
                        {{currentPage+1}}/{{numberOfPages()}}
                        <button ng-disabled="currentPage >= users.info.length/pageSize - 1" ng-click="currentPage=currentPage+1">
                            Next
                        </button>
                    </div>
                </div>
                <div>

                    <button class="users-add-new" onclick="show('AddForm')">Add new +</button>
                </div>
            </div>
            <div class="users-list">
                <div class="list-user-names">
                    <div>Full Name</div>
                    <div>User Login</div>
                    <div>User Posts</div>
                        <div class="filters-order">
                            <div class="filters-order-active" onclick="showHideOrders()">By Date</div>
                            <div class="filters-order-popup" id="orderPopup">
                                <div onclick="filterByRating()">By Rating</div>
                                <div onclick="filterByDate()">By Date</div>
                            </div>
                        </div>
                    <div></div>
                </div>
                <div class="list-user-block" ng-repeat="user in users.info | startFrom:currentPage*pageSize | limitTo: pageSize">
                    <div>{{user.fullname}}</div>
                    <div>{{user.username}}</div>
                    <div>{{user.post}}</div>
                    <div ng-show="showDate" ng-hide="showRating" class="list-user-date">{{user.regDate}}</div>
                    <div ng-show="showRating" ng-hide="showDate" class="list-user-rating">{{user.rating}}</div>
                    <div class="list-user-buttons"><button onclick="showEditForm(this)">Go to profile</button>
                        <form id="delete">
							<input type="hidden" name="_method" value="DELETE" placeholder="method" required>
							<input type="hidden" name="id" value="{{user._id}}" placeholder="id" required>
                            <button onclick="deleteUser(this)" type="submit">Delete user <span>✖</span></button>
                        </form>
                    </div>
                    <div class="user-profile-container">
                    <div class="user-profile">
                        <div class="close-editform" onclick="hideEditForm(this)">+</div>
                        <form class="user-edit" name="EditForm" id="update">
                            <input type="hidden" name="_method" value="PUT" placeholder="id" required>
                            <input type="hidden" name="id" value="{{user._id}}" placeholder="id" required>
                            <div><span>Username</span><input type="text" name="username" value="{{user.username}}" placeholder="Enter username" required> </div>
                            <div><span>E-mail</span><input type="text" name="email" value="{{user.email}}" placeholder="Enter email" required> </div>
                            <div><span>Post</span><input type="text" name="post" value="{{user.post}}" placeholder="User post" required> </div>
                            <div><span>Phone</span><input name="phone" type="tel" value="{{user.phone}}" placeholder="Enter phone number" required> </div>
                            <div><span>Password</span><input type="password" name="password" value="{{user.password}}" placeholder="Enter password" required> </div>
                            <div><span>Full name</span><input type="text" name="fullname" value="{{user.fullname}}" placeholder="Full name of user" required> </div>
                            <div class="user-edit-btn">
                                <button type="submit" ng-disabled="EditForm.$dirty">Edit user <span>✓</span></button>
                            </div>
                        </form>
                    </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
<!--
<div class="template-search" ng-app="templateApp" ng-controller="templateController">
    <div ng-include="'templates/template-pack1.html'"></div>
    <span>Enter template name:</span> <input placeholder="Template Name" type = "text" ng-model = "templateName">
    <br>
    <br>
    <ul>
        <li ng-repeat="element in template.elements | filter: templateName">
            {{element.name}}
            <button ng-click="addElement(element.id)" class="addBtn ">Add  </button>
        </li>
    </ul>
</div>

<div class="template-display" id="addedTemplates">
</div>
<button class="clear-btn" onclick="cleanTemplates()">C<br>L<br>E<br>A<br>N</button> !-->
<script src="test.js"></script>
<script src="js/users.js"></script>
</body>
</html>